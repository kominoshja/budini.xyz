<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Boris Budini

	Journal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.ico">
	<title>Automation between your server and GitHub – Boris Budini</title>
	<meta name="description" content="<p>A few months ago, I was asked to find a way of automating one of Ura’s production servers, to automatically get the code from GitHub, compile it, and then serve it. We were using Jekyll, so it was pretty easy to be solved.. except for the automatic pull. I ended up using a php script + webhooks.</p>

">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Automation between your server and GitHub – Boris Budini">
	<meta name="twitter:description" content="<p>A few months ago, I was asked to find a way of automating one of Ura’s production servers, to automatically get the code from GitHub, compile it, and then serve it. We were using Jekyll, so it was pretty easy to be solved.. except for the automatic pull. I ended up using a php script + webhooks.</p>

">
	<meta name="twitter:image:src" content="http://localhost:4000/images/Sidebar/Tech/server.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Automation between your server and GitHub – Boris Budini" />
	<meta property="og:description" content="<p>A few months ago, I was asked to find a way of automating one of Ura’s production servers, to automatically get the code from GitHub, compile it, and then serve it. We were using Jekyll, so it was pretty easy to be solved.. except for the automatic pull. I ended up using a php script + webhooks.</p>

" />
	<meta property="og:image" content="http://localhost:4000/images/Sidebar/Tech/server.jpg" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather:300,400|Muli:400,400i,600" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading" data-site-url="http://localhost:4000" data-page-url="/blog/server-github-automation">


	<header class="header">

	<div class="header-image header-image--on" style="background-image: url(/images/Sidebar/Tech/server.jpg);"></div>
	<div class="header-image"></div>

	<div class="header-overlay"></div>

	<div class="header__content">

		
		<a href="/" class="header__title">
			Boris Budini
		</a>
		

		<p class="header__tagline">Kominoshe's mindscape</p>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About me</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/portfolio/" class="menu__list__item__link">Portfolio</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/projects/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/tech/" class="menu__list__item__link">Tech</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/events/" class="menu__list__item__link">Events</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/thoughts/" class="menu__list__item__link">Thoughts</a>
					</li>
					
				</ul>
				<ul class="socials">
	
	
	<li class="socials__item">
		<a href="https://www.facebook.com/kominoshja" target="_blank" class="socials__item__link" title="Facebook">
			<i class="fab fa-facebook-f" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	<li class="socials__item">
		<a href="https://twitter.com/kominoshja" target="_blank" class="socials__item__link" title="Twitter">
			<i class="fab fa-twitter" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	<li class="socials__item">
		<a href="https://www.instagram.com/kominoshja/" target="_blank" class="socials__item__link" title="Instagram">
			<i class="fab fa-instagram" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/kominoshja/" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://t.me/kominoshja" target="_blank" class="socials__item__link" title="Telegram">
			<i class="fab fa-telegram" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Automation between your server and GitHub – Boris Budini" data-image="/images/Sidebar/Tech/server.jpg">

			<section class="intro">

	<div class="wrap">

		<h1>Automation between your server and GitHub</h1>
		<p>27 August 2018</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>A few months ago, I was asked to find a way of automating one of Ura’s production servers, to automatically get the code from GitHub, compile it, and then serve it. We were using Jekyll, so it was pretty easy to be solved.. except for the automatic pull. I ended up using a php script + webhooks.</p>

<p>So, first things firsts</p>

<h3 id="what-is-a-webhook">What is a webhook?</h3>
<p>A webhook is a pretty cool method of communication between servers.
Think of it this way.
We have server A and server B. Whenever server A finishes a task, server B needs to be informed. This is where webhooks come in.
After the task in server A is completed, it sends a webhook to server B.
Webhook is kind of like a message!</p>

<h3 id="what-programming-language-did-you-use">What programming language did you use?</h3>

<p>I ended up using PHP.</p>

<h2 id="so-how-did-i-do-it">So, how did I do it?</h2>

<p>I installed Apache2 &amp; PHP7.2</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt <span class="nb">install</span> <span class="nt">-y</span> apache2 php7.0
</code></pre></div></div>

<p>First, i ran <code class="highlighter-rouge">git clone [URL]</code> on <code class="highlighter-rouge">/var/www</code> which created <code class="highlighter-rouge">/var/www/repo</code></p>

<p>Then i created <code class="highlighter-rouge">/var/www/repo/script</code> and under that directory, a file named <code class="highlighter-rouge">[name].php</code>. There, i pasted the content of <a href="https://gist.githubusercontent.com/oodavid/1809044/raw/ba8d01c411c40c2d204aa0eda93f72bea757b5d3/deploy.php">this script</a> written by <a href="https://github.com/oodavid">oodavid</a></p>

<p>I set the permission to Apache user (-R means recursive)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chown</span> <span class="nt">-R</span> www-data:www-data /var/www/repo
</code></pre></div></div>

<p>I then executed this command from inside <code class="highlighter-rouge">/var/www/repo</code></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve <span class="nt">--watch</span>
</code></pre></div></div>
<p>on a <code class="highlighter-rouge">tmux</code> window. This allows the website to be updated everytime there’s a file change
My apache site config file looks like this</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;VirtualHost *:80&gt;
        ServerName ..................

        ProxyPass /script !
        Alias "/script" "/var/www/..../script/deploy.php"

        ProxyPass / http://0.0.0.0:4000/
        ProxyPassReverse / http://0.0.0.0:4000/

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        &lt;Directory "/var/www/...."&gt;
        AllowOverride All
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre></div></div>
<p>So on the appropriate repo on GitHub, i set a <code class="highlighter-rouge">JSON</code> webhook <code class="highlighter-rouge">On push events</code>, with the url <code class="highlighter-rouge">[URL]/script</code></p>
<h2 id="okay-but-why">Okay, but why?</h2>
<p>This kind of automation allows us to do many fun stuff. 
Back in March, it was impossible to have custom domains on GitHub pages WITH SSL. Our develpers didn’t have access to servers, so this helped us to have https://ura.design, https://identihub.co, and allowed me to have https://budini.xyz.</p>

<p>But this isn’t it’s only use case.
On Identihub, we have 4 main facing Identihub instances. 
There’s <a href="https://demo.identihub.co">Demo</a>, which is our showcase, <a href="https://master.identihub.co">Master</a>, <a href="https://dev.identihub.co">Dev</a>, and <a href="https://test.identihub.co">Test</a>. The last three are automatically synced with this very same method! So, you can achieve realtime deployment with little to no hassle.</p>



	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="footer__copyright">
		<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Content under CC-BY-SA 4.0</a>
		<a href="https://journal.jekyllthemes.io/" target="_blank">Journal by Jekyll Themes</a>
		<a href="http://unsplash.com/" target="_blank">Most sidebar images taken from UnSplash</a>
	</div>

</footer>



	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/journal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>